<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <title><%=servant_data[0]['name']%></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>
    <!-- NavBar -->
    <div id="navbar-placeholder" style="position: sticky; z-index: 2;"></div>
    <!-- End NavBar -->

    <div class="mt-5"></div>
    <div class="container-fluid" style="max-width: 70%;">
        <h5 class="mb-3">ID: <%=servant_data[0]['servant_id']%></h5>
        <div class="row justify-content-md-center mb-5">
            <div class="col-sm-2 col-md-5">
                <img class="border border-dark" src="<%=servant_final_asc_img[0]['path']%>" style="border-width: 2px !important; border-radius: 5px;">
            </div>
            <div class="col-sm-8 col-md-7">
                <table class="table table-dark servant-profile">
                    <tbody>
                        <tr class="no-border-top">
                            <td><h3 style="font-weight: 400;"><%=servant_data[0]['name']%></h3></td>
                            <td style="text-align: right;"><a href="/servant/class/<%=servant_data[0]['class_name']%>"><img src="<%=servant_class_img[0]['path']%>" style="width: 40px; height: 40px;"></a></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>Illustrator: </b><%=servant_data[0]['illustrator']%></td>
                            <td><b>Voice Actor: </b><%=servant_data[0]['voice_actor']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>Min HP: </b><%=servant_data[0]['min_hp']%></td>
                            <td><b>Max HP: </b><%=servant_data[0]['max_hp']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>Min ATK: </b><%=servant_data[0]['min_atk']%></td>
                            <td><b>Max ATK: </b><%=servant_data[0]['max_atk']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>Cost: </b><%=servant_data[0]['cost']%></td>
                            <td><b>Gender: </b><%=servant_data[0]['gender']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>Star Absorb: </b><%=servant_data[0]['star_weight']%></td>
                            <td><b>Star Gen: </b><%=servant_data[0]['star_gen']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>NP Gain ATK: </b><%=servant_data[0]['np_gain_atk']%></td>
                            <td><b>NP Gain DEF: </b><%=servant_data[0]['np_gain_def']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>Alignment: </b><%=servant_data[0]['alignment']%></td>
                            <td><b>Attribute: </b><%=servant_data[0]['attribute']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td><b>Death Rate: </b><%=servant_data[0]['death_rate']%></td>
                        </tr>
                        <tr class="no-border-top">
                            <td colspan="2">
                                <b>Traits: </b>
                                <% for(let i = 0; i < servant_traits_data.length - 1; ++i) { %>
                                    <a href="/trait/<%=servant_traits_data[i]['trait'].replace(' ', '_')%>"><%=servant_traits_data[i]['trait']%>, </a>
                                <% } %>
                                <a href="/trait/<%=servant_traits_data[servant_traits_data.length-1]['trait']%>"><%=servant_traits_data[servant_traits_data.length-1]['trait']%></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <h5 class="mb-3"><span class="header-title">Skills</span></h5>
        <div class="row justify-content-md-center mb-3 bg-dark">
            <ul class="nav nav-pills nav-fill" id="skill-tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="first-tab" href="#first" data-toggle="tab" aria-controls="first-skill" role="tab">FIRST SKILL</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="second-tab" href="#second" data-toggle="tab" aria-controls="second-skill" role="tab">SECOND SKILL</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="third-tab" href="#third" data-toggle="tab" aria-controls="third-skill" role="tab">THIRD SKILL</a>
                </li>
            </ul>
        </div>
        <div class="tab-content mb-3">
            <div class="tab-pane fade show active" id="first" role="tabpanel" aria-labelledby="first-skill-tab">
                <% let first_skill = servant_skill_data.filter((skill) => { %>
                    <% return skill.skill_number < 2; %>
                <% }) %>
                <% let first_skill_ups = servant_skill_levels.filter((skill_levels) => { %>
                    <% return skill_levels.skill_number == 1.0 && skill_levels.skill_level == 1; %>
                <% }) %>
                <div class="row justify-content-md-center mb-3 bg-dark">
                    <% if(first_skill.length > 1) { %>
                    <ul class="nav nav-pills nav-fill" id="skill-one-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="first-skill-0-tab" href="#first-skill-0" data-toggle="tab" aria-controls="first-skill-0" role="tab"><%=first_skill[0]['skill_name'] %></a>
                        </li>
                        <% for(let i = 1; i < first_skill.length; ++i) { %>
                            <li class="nav-item">
                                <a class="nav-link" id="first-skill-<%=i%>-tab" href="#first-skill-<%=i%>" data-toggle="tab" aria-controls="first-skill-<%=i%>" role="tab"><%=first_skill[i]['skill_name'] %></a>
                            </li>
                        <% } %>
                    <% } %>
                    </ul>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="first-skill-0" role="tabpanel" aria-labelledby="first-skill-0-tab">
                        <table class="table table-dark table-bordered">
                            <tbody class="text-center" style="width: 100%;">
                                <tr>
                                    <td colspan="11"><b><%=first_skill[0]['skill_name']%> <%=first_skill[0]['skill_rank']%></b></td>
                                </tr>
                                <tr>
                                    <td colspan="11"><%-first_skill[0]['effect'].replace(/\n/g, '<br/>')%></td>
                                </tr>
                                <tr>
                                    <th style="width: 15%;">Level</th>
                                    <th>1</td>
                                    <th>2</td>
                                    <th>3</td>
                                    <th>4</td>
                                    <th>5</td>
                                    <th>6</td>
                                    <th>7</td>
                                    <th>8</td>
                                    <th>9</td>
                                    <th>10</td>
                                </tr>
                                <% for(let i = 0; i < first_skill_ups.length; ++i) { %>
                                    <tr>
                                        <th style="width: 15%;"><%=first_skill_ups[i]['skill_up_effect']%></td>
                                            <% let skill_ups = servant_skill_levels.filter(skill_ups => { %>
                                                <% return skill_ups.skill_up_effect == first_skill_ups[i]['skill_up_effect'] && skill_ups.skill_number == 1 %>
                                            <% }) %>
                                            <% for(let j = 0; j < skill_ups.length; ++j) { %>
                                                <td><%=skill_ups[j]['modifier']%></td>
                                            <% } %>
                                    </tr>
                                <% } %>
                                <% cooldowns = Array.from(new Set(servant_skill_levels.filter((ele) => { %>
                                <%    return ele.skill_number == 1; %>
                                <% }).map((e) => { %>
                                <%     return e.cooldown; %>
                                <% }))).map(JSON.parse) %>
                                <tr>
                                    <th>Cooldown</th>
                                    <td colspan="5"><%=cooldowns[0]%></td>
                                    <td colspan="4"><%=cooldowns[1]%></td>
                                    <td colspan="1"><%=cooldowns[2]%></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <% for(let i = 1; i < first_skill.length; ++i) { %>
                        <% let first_skill_ups = servant_skill_levels.filter((skill_levels) => { %>
                            <% return skill_levels.skill_number == parseFloat("1." + i) && skill_levels.skill_level == 1; %>
                        <% }) %>
                        <div class="tab-pane fade" id="first-skill-<%=i%>" role="tabpanel" aria-labelledby="first-skill-<%=i%>-tab">
                            <table class="table table-dark table-bordered">
                                <tbody class="text-center">
                                    <tr>
                                        <td colspan="11"><b><%=first_skill[i]['skill_name']%> <%=first_skill[i]['skill_rank']%></b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="11"><%-first_skill[i]['effect'].replace(/\n/g, '<br/>')%></td>
                                    </tr>
                                    <tr>
                                        <th style="width: 15%;">Level</th>
                                        <th>1</td>
                                        <th>2</td>
                                        <th>3</td>
                                        <th>4</td>
                                        <th>5</td>
                                        <th>6</td>
                                        <th>7</td>
                                        <th>8</td>
                                        <th>9</td>
                                        <th>10</td>
                                    </tr>
                                    <% for(let j = 0; j < first_skill_ups.length; ++j) { %>
                                        <tr>
                                            <th style="width: 15%;"><%=first_skill_ups[j]['skill_up_effect']%></td>
                                                <% let skill_ups = servant_skill_levels.filter(skill_ups => { %>
                                                    <% return skill_ups.skill_up_effect == first_skill_ups[j]['skill_up_effect'] && skill_ups.skill_number == parseFloat("1." + i) %>
                                                <% }) %>
                                                <% for(let k = 0; k < skill_ups.length; ++k) { %>
                                                    <td><%=skill_ups[k]['modifier']%></td>
                                                <% } %>
                                        </tr>
                                    <% } %>
                                    <% cooldowns = Array.from(new Set(servant_skill_levels.filter((ele) => { %>
                                    <%    return ele.skill_number == parseFloat("1." + i); %>
                                    <% }).map((e) => { %>
                                    <%     return e.cooldown; %>
                                    <% }))).map(JSON.parse) %>
                                    <tr>
                                        <th>Cooldown</th>
                                        <td colspan="5"><%=cooldowns[0]%></td>
                                        <td colspan="4"><%=cooldowns[1]%></td>
                                        <td colspan="1"><%=cooldowns[2]%></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    <% } %>
                </div>
            </div>
            <div class="tab-pane fade" id="second" role="tabpanel" aria-labelledby="second-skill-tab">
                <% let second_skill = servant_skill_data.filter((skill) => { %>
                    <% return skill.skill_number >= 2 && skill.skill_number < 3; %>
                <% }) %>
                <% let second_skill_ups = servant_skill_levels.filter((skill_levels) => { %>
                    <% return skill_levels.skill_number == 2.0 && skill_levels.skill_level == 1; %>
                <% }) %>
                <div class="row justify-content-md-center mb-3 bg-dark">
                    <% if(second_skill.length > 1) { %>
                    <ul class="nav nav-pills nav-fill" id="skill-one-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="second-skill-0-tab" href="#second-skill-0" data-toggle="tab" aria-controls="second-skill-0" role="tab"><%=second_skill[0]['skill_name'] %></a>
                        </li>
                        <% for(let i = 1; i < second_skill.length; ++i) { %>
                            <li class="nav-item">
                                <a class="nav-link" id="second-skill-<%=i%>-tab" href="#second-skill-<%=i%>" data-toggle="tab" aria-controls="second-skill-<%=i%>" role="tab"><%=second_skill[i]['skill_name'] %></a>
                            </li>
                        <% } %>
                    <% } %>
                    </ul>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="second-skill-0" role="tabpanel" aria-labelledby="second-skill-0-tab">
                        <table class="table table-dark table-bordered">
                            <tbody class="text-center" style="width: 100%;">
                                <tr>
                                    <td colspan="11"><b><%=second_skill[0]['skill_name']%> <%=second_skill[0]['skill_rank']%></b></td>
                                </tr>
                                <tr>
                                    <td colspan="11"><%-second_skill[0]['effect'].replace(/\n/g, '<br/>')%></td>
                                </tr>
                                <tr>
                                    <th style="width: 15%;">Level</th>
                                    <th>1</td>
                                    <th>2</td>
                                    <th>3</td>
                                    <th>4</td>
                                    <th>5</td>
                                    <th>6</td>
                                    <th>7</td>
                                    <th>8</td>
                                    <th>9</td>
                                    <th>10</td>
                                </tr>
                                <% for(let i = 0; i < second_skill_ups.length; ++i) { %>
                                    <tr>
                                        <th style="width: 15%;"><%=second_skill_ups[i]['skill_up_effect']%></td>
                                            <% let skill_ups = servant_skill_levels.filter(skill_ups => { %>
                                                <% return skill_ups.skill_up_effect == second_skill_ups[i]['skill_up_effect'] && skill_ups.skill_number == 2 %>
                                            <% }) %>
                                            <% for(let j = 0; j < skill_ups.length; ++j) { %>
                                                <td><%=skill_ups[j]['modifier']%></td>
                                            <% } %>
                                    </tr>
                                <% } %>
                                <% cooldowns = Array.from(new Set(servant_skill_levels.filter((ele) => { %>
                                <%    return ele.skill_number == 2; %>
                                <% }).map((e) => { %>
                                <%     return e.cooldown; %>
                                <% }))).map(JSON.parse) %>
                                <tr>
                                    <th>Cooldown</th>
                                    <td colspan="5"><%=cooldowns[0]%></td>
                                    <td colspan="4"><%=cooldowns[1]%></td>
                                    <td colspan="1"><%=cooldowns[2]%></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <% for(let i = 1; i < second_skill.length; ++i) { %>
                        <% let second_skill_ups = servant_skill_levels.filter((skill_levels) => { %>
                            <% return skill_levels.skill_number == parseFloat("2." + i) && skill_levels.skill_level == 1; %>
                        <% }) %>
                        <div class="tab-pane fade" id="second-skill-<%=i%>" role="tabpanel" aria-labelledby="second-skill-<%=i%>-tab">
                            <table class="table table-dark table-bordered">
                                <tbody class="text-center">
                                    <tr>
                                        <td colspan="11"><b><%=second_skill[i]['skill_name']%> <%=second_skill[i]['skill_rank']%></b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="11"><%-second_skill[i]['effect'].replace(/\n/g, '<br/>')%></td>
                                    </tr>
                                    <tr>
                                        <th style="width: 15%;">Level</th>
                                        <th>1</td>
                                        <th>2</td>
                                        <th>3</td>
                                        <th>4</td>
                                        <th>5</td>
                                        <th>6</td>
                                        <th>7</td>
                                        <th>8</td>
                                        <th>9</td>
                                        <th>10</td>
                                    </tr>
                                    <% for(let j = 0; j < second_skill_ups.length; ++j) { %>
                                        <tr>
                                            <th style="width: 15%;"><%=second_skill_ups[j]['skill_up_effect']%></td>
                                                <% let skill_ups = servant_skill_levels.filter(skill_ups => { %>
                                                    <% return skill_ups.skill_up_effect == second_skill_ups[j]['skill_up_effect'] && skill_ups.skill_number == parseFloat("2." + i) %>
                                                <% }) %>
                                                <% for(let k = 0; k < skill_ups.length; ++k) { %>
                                                    <td><%=skill_ups[k]['modifier']%></td>
                                                <% } %>
                                        </tr>
                                    <% } %>
                                    <% cooldowns = Array.from(new Set(servant_skill_levels.filter((ele) => { %>
                                    <%    return ele.skill_number == parseFloat("2." + i); %>
                                    <% }).map((e) => { %>
                                    <%     return e.cooldown; %>
                                    <% }))).map(JSON.parse) %>
                                    <tr>
                                        <th>Cooldown</th>
                                        <td colspan="5"><%=cooldowns[0]%></td>
                                        <td colspan="4"><%=cooldowns[1]%></td>
                                        <td colspan="1"><%=cooldowns[2]%></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    <% } %>
                </div>
            </div>
            <div class="tab-pane fade" id="third" role="tabpanel" aria-labelledby="third-skill-tab">
                <% let third_skill = servant_skill_data.filter((skill) => { %>
                    <% return skill.skill_number >= 3 && skill.skill_number < 4; %>
                <% }) %>
                <% let third_skill_ups = servant_skill_levels.filter((skill_levels) => { %>
                    <% return skill_levels.skill_number == 3.0 && skill_levels.skill_level == 1; %>
                <% }) %>
                <div class="row justify-content-md-center mb-3 bg-dark">
                    <% if(third_skill.length > 1) { %>
                    <ul class="nav nav-pills nav-fill" id="skill-one-tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="third-skill-0-tab" href="#third-skill-0" data-toggle="tab" aria-controls="third-skill-0" role="tab"><%=third_skill[0]['skill_name'] %></a>
                        </li>
                        <% for(let i = 1; i < third_skill.length; ++i) { %>
                            <li class="nav-item">
                                <a class="nav-link" id="third-skill-<%=i%>-tab" href="#third-skill-<%=i%>" data-toggle="tab" aria-controls="third-skill-<%=i%>" role="tab"><%=third_skill[i]['skill_name'] %></a>
                            </li>
                        <% } %>
                    <% } %>
                    </ul>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="third-skill-0" role="tabpanel" aria-labelledby="third-skill-0-tab">
                        <table class="table table-dark table-bordered">
                            <tbody class="text-center" style="width: 100%;">
                                <tr>
                                    <td colspan="11"><b><%=third_skill[0]['skill_name']%> <%=third_skill[0]['skill_rank']%></b></td>
                                </tr>
                                <tr>
                                    <td colspan="11"><%-third_skill[0]['effect'].replace(/\n/g, '<br/>')%></td>
                                </tr>
                                <tr>
                                    <th style="width: 15%;">Level</th>
                                    <th>1</td>
                                    <th>2</td>
                                    <th>3</td>
                                    <th>4</td>
                                    <th>5</td>
                                    <th>6</td>
                                    <th>7</td>
                                    <th>8</td>
                                    <th>9</td>
                                    <th>10</td>
                                </tr>
                                <% for(let i = 0; i < third_skill_ups.length; ++i) { %>
                                    <tr>
                                        <th style="width: 15%;"><%=third_skill_ups[i]['skill_up_effect']%></td>
                                        <% let skill_ups = servant_skill_levels.filter(skill_ups => { %>
                                            <% return skill_ups.skill_up_effect == third_skill_ups[i]['skill_up_effect'] && skill_ups.skill_number == 3 %>
                                        <% }) %>
                                        <% for(let j = 0; j < skill_ups.length; ++j) { %>
                                            <td><%=skill_ups[j]['modifier']%></td>
                                        <% } %>
                                    </tr>
                                <% } %>
                                <% cooldowns = Array.from(new Set(servant_skill_levels.filter((ele) => { %>
                                <%    return ele.skill_number == 3; %>
                                <% }).map((e) => { %>
                                <%     return e.cooldown; %>
                                <% }))).map(JSON.parse) %>
                                <tr>
                                    <th>Cooldown</th>
                                    <td colspan="5"><%=cooldowns[0]%></td>
                                    <td colspan="4"><%=cooldowns[1]%></td>
                                    <td colspan="1"><%=cooldowns[2]%></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <% for(let i = 1; i < third_skill.length; ++i) { %>
                        <% let third_skill_ups = servant_skill_levels.filter((skill_levels) => { %>
                            <% return skill_levels.skill_number == parseFloat("3." + i) && skill_levels.skill_level == 1; %>
                        <% }) %>
                        <div class="tab-pane fade" id="third-skill-<%=i%>" role="tabpanel" aria-labelledby="third-skill-<%=i%>-tab">
                            <table class="table table-dark table-bordered">
                                <tbody class="text-center">
                                    <tr>
                                        <td colspan="11"><b><%=third_skill[i]['skill_name']%> <%=third_skill[i]['skill_rank']%></b></td>
                                    </tr>
                                    <tr>
                                        <td colspan="11"><%-third_skill[i]['effect'].replace(/\n/g, '<br/>')%></td>
                                    </tr>
                                    <tr>
                                        <th style="width: 15%;">Level</th>
                                        <th>1</td>
                                        <th>2</td>
                                        <th>3</td>
                                        <th>4</td>
                                        <th>5</td>
                                        <th>6</td>
                                        <th>7</td>
                                        <th>8</td>
                                        <th>9</td>
                                        <th>10</td>
                                    </tr>
                                    <% for(let j = 0; j < third_skill_ups.length; ++j) { %>
                                        <tr>
                                            <th style="width: 15%;"><%=third_skill_ups[j]['skill_up_effect']%></th>
                                                <% let skill_ups = servant_skill_levels.filter(skill_ups => { %>
                                                    <% return skill_ups.skill_up_effect == third_skill_ups[j]['skill_up_effect'] && skill_ups.skill_number == parseFloat("3." + i) %>
                                                <% }) %>
                                                <% for(let k = 0; k < skill_ups.length; ++k) { %>
                                                    <td><%=skill_ups[k]['modifier']%></td>
                                                <% } %>
                                        </tr>
                                    <% } %>
                                    <% cooldowns = Array.from(new Set(servant_skill_levels.filter((ele) => { %>
                                    <%    return ele.skill_number == parseFloat("3." + i); %>
                                    <% }).map((e) => { %>
                                    <%     return e.cooldown; %>
                                    <% }))).map(JSON.parse) %>
                                    <tr>
                                        <th>Cooldown</th>
                                        <td colspan="5"><%=cooldowns[0]%></td>
                                        <td colspan="4"><%=cooldowns[1]%></td>
                                        <td colspan="1"><%=cooldowns[2]%></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    <% } %>
                </div>
            </div>
        </div>
        <h5 class="mb-3"><span class="header-title">Passive Skills</span></h5>
        <div class="row justify-content-md-center mb-3 bg-dark">
            <table class="table table-dark table-bordered text-center">
                <tbody>
                    <% for(let i = 0; i < servant_passive_skills.length; ++i) { %>
                        <tr>
                            <th rowspan="2" style="width: 5%; vertical-align: middle;"><%=i+1%></th>
                            <th><%=servant_passive_skills[i]['passive']%> <%=servant_passive_skills[i]['rank']%></th>
                        </tr>
                        <tr>
                            <td><%=servant_passive_skills[i]['effect']%></td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
        <h5 class="mb-3"><span class="header-title">Noble Phantasm</span></h5>
        <div class="row justify-content-md-center mb-3 bg-dark">
            <% if(servant_np_data.length > 1) { %>
                <ul class="nav nav-pills nav-fill" id="np-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="np-0-tab" href="#np-0" data-toggle="tab" aria-controls="np-0" role="tab"><%=servant_np_data[0]['name'].split(':')[0]%></a>
                    </li>
                    <% for(let i = 1; i < servant_np_data.length; ++i) { %>
                        <li class="nav-item">
                            <a class="nav-link" id="np-<%=i%>-tab" href="#np-<%=i%>" data-toggle="tab" aria-controls="np-<%=i%>" role="tab"><%=servant_np_data[i]['name'].split(':')[0]%></a>
                        </li>
                    <% } %>
                </ul>
            <% } %>
        </div>
        <div class="tab-content mb-3">
            <div class="tab-pane fade show active" id="np-0" role="tabpanel" aria-labelledby="np-0-tab">
                <table class="table table-dark table-bordered text-center">
                    <tbody>
                        <tr>
                            <td colspan="6"><b><%=servant_np_data[0]['name']%></b></td>
                        </tr>
                        <tr>
                            <% let card_type_links = {'Buster': 'https://vignette.wikia.nocookie.net/fategrandorder/images/6/6e/Buster.png/revision/latest/scale-to-width-down/75?cb=20151024070603',
                                                    'Arts': 'https://vignette.wikia.nocookie.net/fategrandorder/images/9/95/Arts.png/revision/latest/scale-to-width-down/75?cb=20151024070603',
                                                    'Quick': 'https://vignette.wikia.nocookie.net/fategrandorder/images/8/84/Quick.png/revision/latest/scale-to-width-down/75?cb=20151024070603'} %>
                            <td rowspan="2" colspan="2" style="width: 15%;"><img src="<%=card_type_links['Buster']%>"></td>
                            <th colspan="2">Rank</th>
                            <th colspan="2">Classification</th>
                        </tr>
                        <tr>
                            <td colspan="2"><%=servant_np_data[0]['rank']%></td>
                            <td colspan="2"><%=servant_np_data[0]['classification']%></td>
                        </tr>
                        <tr>
                            <th style="width: 15%;">Effect</th>
                            <td colspan="5"><%-servant_np_data[0]['effect'].replace(/\n/g, '<br/>')%></td>
                        </tr>
                        <tr>
                            <th style="width: 15%;">NP Level</th>
                            <th>1</th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                        </tr>
                        <% let np_effect_modifiers = servant_np_levels.filter(e => { return e.level == 1; }) %>
                        <% for(let i = 0; i < np_effect_modifiers.length; ++i) { %>
                            <% let effect_modifiers = servant_np_levels.filter(e => { return e.np_effect_modifier == np_effect_modifiers[i]['np_effect_modifier']; }) %>
                            <tr>
                                <th style="width: 15%;"><%=effect_modifiers[0]['np_effect_modifier']%></th>
                                <td><%=effect_modifiers[0]['np_modifier']%></td>
                                <td><%=effect_modifiers[1]['np_modifier']%></td>
                                <td><%=effect_modifiers[2]['np_modifier']%></td>
                                <td><%=effect_modifiers[3]['np_modifier']%></td>
                                <td><%=effect_modifiers[4]['np_modifier']%></td>
                            </tr>
                        <% } %>
                        <tr>
                            <th style="width: 15%;">OC Effect</th>
                            <td colspan="5"><%-servant_np_data[0]['oc_effect'].replace(/\n/g, '<br/>')%></td>
                        </tr>
                        <tr>
                            <th style="width: 15%;">Overcharge</th>
                            <th>100%</th>
                            <th>200%</th>
                            <th>300%</th>
                            <th>400%</th>
                            <th>500%</th>
                        </tr>
                        <% let oc_effect_modifiers = servant_np_oc_levels.filter(e => { return e.level == 1; }) %>
                        <% for(let i = 0; i < oc_effect_modifiers.length; ++i) { %>
                            <% let oc_modifiers = servant_np_oc_levels.filter(e => { return e.oc_effect_modifier == oc_effect_modifiers[i]['oc_effect_modifier']; }) %>
                            <tr>
                                <th style="width: 15%;"><%=oc_effect_modifiers[0]['oc_effect_modifier']%></th>
                                <td><%=oc_modifiers[0]['oc_modifier']%></td>
                                <td><%=oc_modifiers[1]['oc_modifier']%></td>
                                <td><%=oc_modifiers[2]['oc_modifier']%></td>
                                <td><%=oc_modifiers[3]['oc_modifier']%></td>
                                <td><%=oc_modifiers[4]['oc_modifier']%></td>
                            </tr>
                        <% } %>
                    </tbody>
                </table>
            </div>
            <% for(let i = 1; i < servant_np_data.length; ++i) { %>
                <div class="tab-pane fade" id="np-<%=i%>" role="tabpanel" aria-labelledby="np-<%=i%>-tab">
                    <table class="table table-dark table-bordered text-center">
                        <tbody>
                            <tr>
                                <td colspan="6"><b><%=servant_np_data[i]['name']%></b></td>
                            </tr>
                            <tr>
                                <% let card_type_links = {'Buster': 'https://vignette.wikia.nocookie.net/fategrandorder/images/6/6e/Buster.png/revision/latest/scale-to-width-down/75?cb=20151024070603',
                                                        'Arts': 'https://vignette.wikia.nocookie.net/fategrandorder/images/9/95/Arts.png/revision/latest/scale-to-width-down/75?cb=20151024070603',
                                                        'Quick': 'https://vignette.wikia.nocookie.net/fategrandorder/images/8/84/Quick.png/revision/latest/scale-to-width-down/75?cb=20151024070603'} %>
                                <td rowspan="2" colspan="2" style="width: 15%;"><img src="<%=card_type_links['Buster']%>"></td>
                                <th colspan="2">Rank</th>
                                <th colspan="2">Classification</th>
                            </tr>
                            <tr>
                                <td colspan="2"><%=servant_np_data[i]['rank']%></td>
                                <td colspan="2"><%=servant_np_data[i]['classification']%></td>
                            </tr>
                            <tr>
                                <th style="width: 15%;">Effect</th>
                                <td colspan="5"><%-servant_np_data[i]['effect'].replace(/\n/g, '<br/>')%></td>
                            </tr>
                            <tr>
                                <th style="width: 15%;">NP Level</th>
                                <th>1</th>
                                <th>2</th>
                                <th>3</th>
                                <th>4</th>
                                <th>5</th>
                            </tr>
                            <% let np_effect_modifiers = servant_np_levels.filter(e => { return e.level == 1; }) %>
                            <% for(let j = 0; j < np_effect_modifiers.length; ++j) { %>
                                <% let effect_modifiers = servant_np_levels.filter(e => { return e.np_effect_modifier == np_effect_modifiers[j]['np_effect_modifier']; }) %>
                                <tr>
                                    <th style="width: 15%;"><%=effect_modifiers[0]['np_effect_modifier']%></th>
                                    <td><%=effect_modifiers[0]['np_modifier']%></td>
                                    <td><%=effect_modifiers[1]['np_modifier']%></td>
                                    <td><%=effect_modifiers[2]['np_modifier']%></td>
                                    <td><%=effect_modifiers[3]['np_modifier']%></td>
                                    <td><%=effect_modifiers[4]['np_modifier']%></td>
                                </tr>
                            <% } %>
                            <tr>
                                <th style="width: 15%;">OC Effect</th>
                                <td colspan="5"><%-servant_np_data[0]['oc_effect'].replace(/\n/g, '<br/>')%></td>
                            </tr>
                            <tr>
                                <th style="width: 15%;">Overcharge</th>
                                <th>100%</th>
                                <th>200%</th>
                                <th>300%</th>
                                <th>400%</th>
                                <th>500%</th>
                            </tr>
                            <% let oc_effect_modifiers = servant_np_oc_levels.filter(e => { return e.level == 1; }) %>
                            <% for(let j = 0; j < oc_effect_modifiers.length; ++j) { %>
                                <% let oc_modifiers = servant_np_oc_levels.filter(e => { return e.oc_effect_modifier == oc_effect_modifiers[j]['oc_effect_modifier']; }) %>
                                <tr>
                                    <th style="width: 15%;"><%=oc_effect_modifiers[0]['oc_effect_modifier']%></th>
                                    <td><%=oc_modifiers[0]['oc_modifier']%></td>
                                    <td><%=oc_modifiers[1]['oc_modifier']%></td>
                                    <td><%=oc_modifiers[2]['oc_modifier']%></td>
                                    <td><%=oc_modifiers[3]['oc_modifier']%></td>
                                    <td><%=oc_modifiers[4]['oc_modifier']%></td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            <% } %>
        </div>
        <h5 class="mb-3"><span class="header-title">Stats</span></h5>
        <div class="row justify-content-md-center mb-3 bg-dark">
            <table class="table table-dark table-bordered text-center">
                <tbody>
                    <tr>
                        <th><b>Strength:</b></th>
                        <th><b>Agility:</b></th>
                        <th><b>Endurance:</b></th>
                    </tr>
                    <tr>
                        <td><%=servant_stats_data[0]['strength']%></td>
                        <td><%=servant_stats_data[0]['agility']%></td>
                        <td><%=servant_stats_data[0]['endurance']%></td>
                    </tr>
                    <tr>
                        <th><b>Mana:</b></th>
                        <th><b>Luck:</b></th>
                        <th><b>NP:</b></th>
                    </tr>
                    <tr>
                        <td><%=servant_stats_data[0]['mana']%></td>
                        <td><%=servant_stats_data[0]['luck']%></td>
                        <td><%=servant_stats_data[0]['np']%></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <h5 class="mb-3"><span class="header-title">Bond Dialogues</span></h5>
        <div class="row justify-content-md-center mb-3 bg-dark">
            <ul class="nav nav-pills nav-fill" id="bond-dialogue-tab" role="tablist">
                <% if(servant_bond_dialogues.length > 0) { %>
                    <li class="nav-item">
                        <a class="nav-link active" id="dialogue-0-tab" href="#dialogue-0" data-toggle="tab" aria-controls="dialogue-0" role="tab"><%=servant_bond_dialogues[0]['bond_level']%></a>
                    </li>
                <% } %>
                <% for(let i = 1; i < servant_bond_dialogues.length; ++i) { %>
                    <li class="nav-item">
                        <a class="nav-link" id="dialogue-<%=i%>-tab" href="#dialogue-<%=i%>" data-toggle="tab" aria-controls="dialogue-<%=i%>" role="tab"><%=servant_bond_dialogues[i]['bond_level']%></a>
                    </li>
                <% } %>
            </ul>
        </div>
        <div class="tab-content">
            <% if(servant_bond_dialogues.length > 0) { %>
                <div class="tab-pane fade show active" id="dialogue-0" role="tabpanel" aria-labelledby="dialogue-0-tab">
                    <table class="table table-dark table-bordered text-center">
                        <tbody>
                            <tr>
                                <td><%-servant_bond_dialogues[0]['dialogue'].replace(/\n/g, '<br/>')%></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            <% } %>
            <% for(let i = 1; i < servant_bond_dialogues.length; ++i) { %>
                <div class="tab-pane fade" id="dialogue-<%=i%>" role="tabpanel" aria-labelledby="dialogue-<%=i%>-tab">
                    <table class="table table-dark table-bordered text-center">
                        <tbody>
                            <tr>
                                <td><%-servant_bond_dialogues[i]['dialogue'].replace(/\n/g, '<br/>')%></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            <% } %>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"></script>
    <script type="text/javascript">
        $(function () {
            $("#navbar-placeholder").load("navbar.html");
        });
    </script>
    <script src="/main.js"></script>
</body>
</html>